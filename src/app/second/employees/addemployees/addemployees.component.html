<div class="container">
  <section class="content-header">
    <h1>
      Staff <small>Add</small>
    </h1>
    <ol class="breadcrumb">
      <li><a [routerLink]="['/main/dashboard']"><i class="fa fa-dashboard"></i> Dasbhoard</a></li>
      <li><a [routerLink]="['/main/hrmange/employees']">Staff</a></li>
      <li class="active"><b>Add</b></li>
    </ol>
  </section>
  <section class="content">
    <div class="row">
      <!-- left column -->
      <div class="col-md-12">
        <!-- general form elements -->
        <div class="box box-primary">
         
          <!-- form start -->

          <form #f="ngForm" name="myForm">
            <div class="box-body">
              <div class="form-group" style="display:none">
                <div class="row">
                  <div class="col-md-4">
                    <label for="name" style="clear:both;">Staff Id</label>
                    <input type="text" name="employee_id" value="0" [(ngModel)]="user.employee_id"
                      #employee_id="ngModel" class="form-control" disabled="disabled">
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="row">
                  <div class="col-md-4">
                    <label for="name" style="clear:both;">Name <span>*</span></label>
                    <input type="text" name="name" [(ngModel)]="user.name" #name="ngModel" class="form-control"
                      onkeypress="return (event.charCode > 64 && event.charCode < 91) || (event.charCode > 96 && event.charCode < 123) || (event.charCode > 31 && event.charCode < 33) || (event.charCode > 47 && event.charCode < 58)"
                      required pattern="[a-zA-Z ]*">
                    <span class="err-msg">
                      <div *ngIf="name.touched">
                        <div *ngIf="name.errors && name.errors.required">
                          Name is required
                        </div>
                      </div>
                    </span>
                    <span class="err-msg">
                      <div *ngIf="name.touched">
                        <div *ngIf="name.errors && name.errors.pattern">
                          please enter olny Alphabits
                        </div>
                      </div>
                    </span>
                  </div>
                  <div class="col-md-4">
                    <label for="name" style="clear:both;">Profile Picture</label>
                    <input type="file" name="file" id="file" (change)="getFileDetails($event)" class="form-control"
                      required>
                  </div>
                  <div class="col-md-4">
                    <label for="gender" style="clear:both;">Gender <span>*</span>&nbsp;&nbsp;</label>
                    <input type="radio" name="gender" value="Male" [(ngModel)]="user.gender" #gender="ngModel" required>
                    Male
                    <input type="radio" name="gender" [(ngModel)]="user.gender" #gender="ngModel" value="Female"
                      required> Female
                    <span class="err-msg">
                      <div *ngIf="gender.errors && gender.errors.required">
                        Gender is required
                      </div>
                    </span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="row">
                  <div class="col-md-4">
                    <label for="dob" style="clear:both;">Date Of Birth <span>*</span></label>
                    <input type="date" name="dob" [(ngModel)]="user.dob" #dob="ngModel" class="form-control datepicker"
                      required>
                    <span class="err-msg">
                      <div *ngIf="dob.touched">
                        <div *ngIf="dob.errors && dob.errors.required">
                          Date Of Birth is required
                        </div>
                      </div>
                    </span>
                  </div>
                  <div class="col-md-4">
                    <label for="email" style="clear:both;">User Role <span>*</span></label>
                    <select name="user_role" class="form-control chzn" [(ngModel)]="user.user_role"
                      #user_role="ngModel">
                      <option value="">--Select User Role---</option>
                      <option value="1">Admin</option>
                      <option value="2">Staff</option>
                    </select>
                  </div>
                  <div class="col-md-4">
                    <label for="department" style="clear:both;">Departments <span>*</span></label>
                    <select [(ngModel)]="user.dept_name" #dept_name="ngModel" name="dept_name"
                      (change)="changedept(dept_name.value)" data-live-search="true" required class="form-control">
                      <option value="" [selected]=true>Please select</option>
                      <option *ngFor="let item of adddepartments;let i = index;" value={{adddepartments[i].id}}>
                        {{adddepartments[i].dept_name}}</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="row">
                  <div class="col-md-4">
                    <label for="designation" style="clear:both;">Designation <span>*</span></label>
                    <select [(ngModel)]="user.designation" #designation="ngModel" name="designation"
                      [disabled]="newdesig !='yes'" data-live-search="true" required class="form-control">
                      <option value="">--Select Designation---</option>
                      <option *ngFor="let item of adddepartmentss;let i = index;" value={{adddepartmentss[i].id}}>
                        {{adddepartmentss[i].designation}}</option>
                    </select>
                  </div>
                  <div class="col-md-4">
                    <label for="name" style="clear:both;">Date Of Joining <span>*</span></label>
                    <input type="date" name="doj" value="" [(ngModel)]="user.doj" #doj="ngModel"
                      class="form-control datepicker" required>
                    <span class="err-msg">
                      <div *ngIf="doj.touched">
                        <div *ngIf="doj.errors && doj.errors.required">
                          Date Of Joining is required
                        </div>
                      </div>
                    </span>
                  </div>
                  <div class="col-md-4">
                    <label for="name" style="clear:both;">Joining Salary <span>*</span></label>
                    <input type="text" name="join_salary" value="" [(ngModel)]="user.join_salary" #join_salary="ngModel"
                      class="form-control"pattern="[0-9]{1,9}" required>
                      <span class="err-msg">
                        <div *ngIf="join_salary.touched">
                          <div *ngIf="join_salary.errors && join_salary.errors.required">
                            Joining Salary is required
                          </div>
                        </div>
                      </span>
                      <span class="err-msg">
                        <div *ngIf="join_salary.touched">
                          <div *ngIf="join_salary.errors && join_salary.errors.pattern">
                            Enter only numeric numbers
                          </div>
                        </div>
                      </span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="row">
                  <div class="col-md-4">
                    <label for="email" style="clear:both;">Email <span>*</span></label>
                    <input type="text" name="email" value="" [(ngModel)]="user.email" #email="ngModel"
                      class="form-control"
                      pattern="^\S+@(([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6})$" required>
                    <span class="err-msg">
                      <div *ngIf="email.touched">
                        <div *ngIf="email.errors && email.errors.required">
                          email is required
                        </div>
                      </div>
                    </span>
                    <span class="err-msg">
                      <div *ngIf="email.touched">
                        <div *ngIf="email.errors && email.errors.pattern">
                          please enter email id correctly
                        </div>
                      </div>
                    </span>
                  </div>
                  <div class="col-md-4">
                    <label for="username" style="clear:both;">Username <span>*</span></label>
                    <input type="text" name="username" value="" class="form-control" [(ngModel)]="user.username"
                      #username="ngModel" pattern="[A-Za-z0-9]+" required>
                    <span class="err-msg">
                      <div *ngIf="username.touched">
                        <div *ngIf="username.errors && username.errors.required">
                          username is required
                        </div>
                      </div>
                    </span>
                    <span class="err-msg">
                        <div *ngIf="username.touched">
                          <div *ngIf="username.errors && username.errors.pattern">
                            please enter username correctly
                          </div>
                        </div>
                      </span>
                  </div>
                  <div class="col-md-4">
                    <label for="password" style="clear:both;">Password <span>*</span></label>
                    <input type="password" name="password" value="" class="form-control" [(ngModel)]="user.password"
                      #password="ngModel" required>
                      <span class="err-msg">
                        <div *ngIf="password.touched">
                            <div *ngIf="password.errors && password.errors.required">
                                Password is required
                            </div>
                        </div>
                    </span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="row">
                  <div class="col-md-4">
                    <label for="password" style="clear:both;">Confirm Password <span>*</span></label>
                    <input type="password" name="confirm" value="" class="form-control" [pattern]="user.password" [(ngModel)]="user.confirm"
                    #confirm="ngModel" required>
                    <span class="err-msg">
                      <div *ngIf="confirm.touched" aria-hidden="true">
                          <div *ngIf="confirm.errors && confirm.errors.required">
                              Password is required
                          </div>
                      </div>
                  </span>
                  <span class="err-msg">
                      <div *ngIf="confirm.touched" aria-hidden="true">
                          <div *ngIf="confirm.errors && confirm.errors.pattern">
                            Password not matched.
                          </div>
                      </div>
                  </span>
                  </div>
                  <div class="col-md-4">
                    <label for="contact" style="clear:both;">Phone <span>*</span></label>
                    <input type="text" name="phone" value="" class="form-control" [(ngModel)]="user.phone"
                      #phone="ngModel" required pattern="[0-9]{10}">
                    <span class="err-msg">
                      <div *ngIf="phone.touched">
                        <div *ngIf="phone.errors && phone.errors.required">
                          Mobile no is required
                        </div>
                      </div>
                    </span>
                    <span class="err-msg">
                      <div *ngIf="phone.touched">
                        <div *ngIf="phone.errors && phone.errors.pattern">
                          Please enter valid mobile no
                        </div>
                      </div>
                    </span>
                  </div>
                  <div class="col-md-4">
                    <label for="contact" style="clear:both;">Address <span>*</span></label>
                    <textarea name="address" class="form-control" [(ngModel)]="user.address" #address="ngModel"
                      required></textarea>
                    <span class="err-msg">
                      <div *ngIf="address.touched">
                        <div *ngIf="address.errors && address.errors.required">
                          Address is required
                        </div>
                      </div>
                    </span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="row">
                  <div class="col-md-4">
                    <label for="name" style="clear:both;">Status <span>*</span>&nbsp;&nbsp;</label>
                    <input type="radio" name="stat" value="active" [(ngModel)]="user.stat" #stat="ngModel" required>
                    Active
                    <input type="radio" name="stat" value="disabled" [(ngModel)]="user.stat" #stat="ngModel" required>
                    Disabled
                    <span class="err-msg">
                      <div *ngIf="stat.errors && stat.errors.required">
                        Status is required
                      </div>
                    </span>
                  </div>
                </div>
              </div>
            </div><!-- /.box-body -->
            <div class="box-footer ">
              <div class="row">
                <div class="col-md-4 col-md-offset-4">
                    <button type="submit" class="btn btn-primary" (click)="addemployee(user)" ng-disabled="myForm.$invalid"
                    [disabled]="!f.valid">Save</button>
                </div>
              </div>
            </div>
          </form>
        </div><!-- /.box -->
      </div>
    </div>
  </section>
</div>

<div class="modal fade successmechPopup" tabindex="-1" role="dialog">
    <div class="modal-dialog  modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">Staff Add</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>
                    <i class="fa fa-check fa-2"></i>&nbsp;
                    <span>Staff added sucessfully</span>
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" (click)="redirect()" class="btn btn-danger" data-dismiss="modal">close</button>
            </div>
        </div>
    </div>
  </div>